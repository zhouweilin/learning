<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"> 
    <title>mlib-test</title>
    <link rel="stylesheet" href="./css/animate.min.css">
    <style>
        *{padding:0;margin:0;}
        html{height:100%;}
        body{height:100%;}
        .ajax{margin:100px auto;width:300px;}
        .test{position:fixed;width:100px;height:100px;border:1px solid red;}
        #debugger{position:fixed;right:0;width:200px;height:100px;background:#000;color:#0fdd0f;padding:6px;bottom:0;}
        .layer-wrap{position:fixed;width:100%;height:100%;left:0;top:0;}
        .layer-mask{background:#000;opacity:.5;filter:alpha(opacity:50);position:absolute;width:100%;height:100%;}
        .layer-container{position:absolute;left:50%;top:50%;background:#fff;}
        body{height:2000px;}

    </style>  
<body> 
    
  
    <div class="test">
      





    </div>
    <script>
        var i = 0;
        while(i <  50){
          document.write('<p>' + i + '</p>');
          i++;
        }    
    </script>



    <script type="text/javascript" src="./js/jquery-1.12.js"></script>
    <!-- <script type="text/javascript" src="./js/zepto.js"></script> -->
    <!-- <script type="text/javascript" src="./js/plugins/dev/jquery.validate.js"></script> -->
    <!-- <script type="text/javascript" src="./js/mlib.js"></script> -->
    <script>
    (function(factory){
      if(typeof define === 'function'){
        define(['jquery'], factory);
      }else if(typeof module === 'object' && module.exports){
        module.exports = factory(require('jquery'));
      }else{
        factory(jQuery);
      }
    })(function($){
      var defaults = {
          width: 200,
          height: 200,
          preventScroll: false
      };


      function Layer(con, options){
        this._body = $('body');
        this.con = con || '请通过第一个参数传要展示的内容!';
        this.opts = $.extend(defaults, options);
        this.mask = null;
        this.wrap = null;
        this.container = null;
        this.close = null;


        this.init();
      }

      Layer.prototype = {
        init: function(){

          this.preventScroll();
          this.createDom();
        },
        createDom: function(){
          var _wrap = this.wrap = $('<div class="layer-wrap">' + 
                    '<div class="layer-mask"></div>' +
                    '<div class="layer-container">' +
                       '<span class="layer-close"></span>' + 
                       '<div class="layer-content"></div>' +
                    '</div>' +
              '</div>');

          this.mask = _wrap.find('.layer-mask');
          this.close = _wrap.find('.layer-close');
          this.container = _wrap.find('.layer-container');

          this.setContainerStyle();

          this._body.append(_wrap);
        },
        setContainerStyle: function(){
          var opts = this.opts;

          this.container.css({
            width: opts.width,
            height: opts.height,
            marginLeft: - opts.width/2,
            marginTop: - opts.height/2
          }).find('.layer-content').append(this.con);

        },
        preventScroll: function(){
          if(this.opts.preventScroll){
            this._body.css('overflow', 'hidden');
          }
        }

      }
      
      window.layer = Layer;
    });


 
    $(function(){
        
    


      new layer('111', {
        preventScroll: true
      });




    });



    </script>
</body>
</html>